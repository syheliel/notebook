## 概念
- a是模m的平方剩余
$$ \exist x \ s.t. \ x^2 \equiv a \mod m $$

- 勒让德符号，p为奇素数(1:平方剩余;-1:非平方剩余;0:$p|a$)
$$(\frac{a}{p})=a^{(p-1)/2} \mod p \\
(\frac{-1}{p})=(-1)^{(p-1)/2} \mod p \\
(\frac{2}{p})=(-1)^{(p^2-1)/8} \mod p $$

- 雅可比符号(a:整数,m:奇整数),-1：非平方剩余，1：无法确定
$$(\frac{a}{m}) \\
(\frac{-1}{m})=(-1)^{(m-1)/2} \mod p \\
(\frac{2}{m})=(-1)^{(m^2-1)/8} \mod p $$
## 定理
- 欧拉判别条件：p为奇素数,(a,p)=1
a是模m的平方剩余/非平方剩余的充要条件：
$$a^{\frac{p-1}{2}} \equiv 1/-1 \mod p$$
证明：p129
把$x^p-x$分解为$x^p-x$和$(a^{\frac{p-1}{2}}-1)$部分

- 高斯引理：p是奇素数，(a,p)=1,整数a*1,a*2,...,a*(p-1)/2中大于p/2的个数为m，则：
$$(\frac{a}{p})=(-1)^{m}$$
把所有数字相乘，把大于$p/2$的部分($m_i$)替换为(-1)*(p-$m_i$),证明右侧是1,2,...,(p-1)/2的排列组合
- p为奇素数
$$(\frac{2}{p}) = (-1)^{\frac{p^2-1}{8}} \\
(a,2p=1) => (\frac{a}{p})=(-1)^{T(a,p)} \\
T(a) = 
$$
- 二次互反律(p,q是奇素数)
$$(\frac{q}{p})=(-1)^{(p-1)*(q-1)/4}*(\frac{p}{q}) $$

- p为形如4k+3的素数:
$$x^2 \equiv a \mod p \\
x \equiv a^{(p+1)/4} \mod p$$

## 算法
- 模p平方根求解(p是奇素数)
本质：
将问题化为求解
$$x^2*a^{-1} \equiv 1 \mod p$$
已知原式子一定有解，而原式子的解一定满足
$$(x^2*a^{-1})^{2^{k-1}} \equiv 1 \mod p \ (k=1..t )$$
而我又能知道k=t的解
$$(x^2*a^{-1})^{2^{t-1}} \equiv 1 \mod p $$
之后通过k=t的解来求解k=t-1的解（相当于开平方根，k=t时有两个解 1 or -1，所以排除其中一个解就是真正的平方根）
过程:
$$
p - 1 = 2^t*s
$$
